---
import { getCollection } from 'astro:content';
import '../styles/global.css';

const posts = await getCollection('posts');
const sorted = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

function formatDate(date: Date): string {
  const d = String(date.getDate()).padStart(2, '0');
  const m = String(date.getMonth() + 1).padStart(2, '0');
  const y = String(date.getFullYear()).slice(-2);
  return `${d}/${m}/${y}`;
}
---
<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Blog</title></head>
<body>
<pre set:html={sorted.map(post => `${formatDate(post.data.date)}    <a href="/${post.id}">${post.data.title}</a>`).join('\n')} />
</body>
</html>
